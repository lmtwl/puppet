server {
        listen 80;


        ssi on;
        ssi_types text/shtml;


        root /usr/share/nginx/act.xunyou.com;
        index index.shtml index.html index.php;
        server_name act.xunyou.com orig.act.xunyou.com orig2.act.xunyou.com;

        error_page 500 /500.html;
        #error_page 403 http://www.xunyou.com;
        error_page 404 /404.html;
location ~ /.svn/ {
  deny all;
}
location ~ /(wap/uploads|uploads|api/application/cache|api/application/logs|wap/applicaiton/cache|wap/application/logs)/ {
       location ~ \.(php|php5)$ {
        deny all;
    }
}
location / {
        expires 20m;
        }
location ~ \.php {
  fastcgi_index index.php;
  fastcgi_pass unix:/dev/shm/php5-fpm.sock;
  include fastcgi_params;
  set $path_info "";
  set $real_script_name $fastcgi_script_name;
  if ($fastcgi_script_name ~ "^(.+?\.php)(/.+)$") {
    set $real_script_name $1;
    set $path_info $2;
  }
  fastcgi_param SCRIPT_FILENAME /usr/share/nginx/act.xunyou.com/$real_script_name;
  fastcgi_param SCRIPT_NAME $real_script_name;
  fastcgi_param PATH_INFO $path_info;
}

}

server {
        listen    80;
	listen 443 ssl;
	limit_req zone=one burst=15;
        ssi on;
	ssl_certificate /etc/nginx/ssl/xunyou.crt;
        ssl_certificate_key /etc/nginx/ssl/xunyou.key;
        ssl_session_timeout 5m;
        ssl_protocols SSLv3 TLSv1.1 TLSv1.2;
        ssl_ciphers AESGCM:ALL:!DH:!EXPORT:!RC4:+HIGH:!MEDIUM:!LOW:!aNULL:!eNULL;
        ssl_prefer_server_ciphers on;
        ssi_types text/shtml;
        root /usr/share/nginx/login.xunyou.com;
        index index.shtml  index.html index.php;
        server_name login.xunyou.com;

        #location / {
        #       try_files $uri $uri/ /index.html;
        #}

        error_page 500 = /500.html;
        error_page 404 =404 /404.html;
        #error_page 404 =200  /404.php;
        location ~ /.svn/ {
           deny all;
        }
        location ~ \.php {
        #       fastcgi_intercept_errors on;
                fastcgi_split_path_info ^(.+\.php)(/.+)$;
        #       # NOTE: You should have "cgi.fix_pathinfo = 0;" in php.ini
        #
        #       # With php5-cgi alone:
                fastcgi_pass unix:/dev/shm/php5-fpm.sock;
                # With php5-fpm:
        #       fastcgi_pass unix:/var/run/php5-fpm.sock;
                fastcgi_index index.php;
                include fastcgi_params;
        }

        location ~ /xystat{
                fastcgi_split_path_info ^(.+\.php)(/.+)$;
                fastcgi_pass unix:/dev/shm/php5-fpm.sock;
                include fastcgi_params;
        }
}


server {
        listen 80;


        ssi on;
        ssi_types text/shtml;


        root /usr/share/nginx/app.xunyou.com/htdocs;
        index index.shtml index.html index.php;
        server_name app.xunyou.com;

        error_page 500 /500.html;
        #error_page 403 http://www.xunyou.com;
        error_page 404 /404.html;
        location ~ /.svn/ {
           deny all;
        }
        location ~ /logs/ {
           deny all;
        }
location ~ \.php {
  fastcgi_index index.php;
  fastcgi_pass unix:/dev/shm/php5-fpm.sock;
  include fastcgi_params;
  set $path_info "";
  set $real_script_name $fastcgi_script_name;
  if ($fastcgi_script_name ~ "^(.+?\.php)(/.+)$") {
    set $real_script_name $1;
    set $path_info $2;
  }
  fastcgi_param SCRIPT_FILENAME /usr/share/nginx/app.xunyou.com/htdocs/$real_script_name;
  fastcgi_param SCRIPT_NAME $real_script_name;
  fastcgi_param PATH_INFO $path_info;
}

}

server {
        listen 80;
        ssi on;
        ssi_types text/shtml;
        root /usr/share/nginx/cs.xunyou.com/htdocs;
        index  default.php  index.shtml index.html index.php;
        server_name cs.xunyou.com;
        error_page 500 /500.html;
        #error_page 403 http://www.xunyou.com;
        error_page 404 /404.html;
location ~ /.svn/ {
  deny all;
}
location ~ /upload/{
        location ~ \.(php|php5)$ {
        deny all;
    }
}
location ~ /(application/cache)/ {
        deny all;
}
location  / {
  expires 35m;
}
location ~ \.php {
  fastcgi_index index.php;
  fastcgi_pass unix:/dev/shm/php5-fpm.sock;
  include fastcgi_params;
  set $path_info "";
  set $real_script_name $fastcgi_script_name;
  if ($fastcgi_script_name ~ "^(.+?\.php)(/.+)$") {
    set $real_script_name $1;
    set $path_info $2;
  }
  fastcgi_param SCRIPT_FILENAME /usr/share/nginx/cs.xunyou.com/htdocs/$real_script_name;
  fastcgi_param SCRIPT_NAME $real_script_name;
  fastcgi_param PATH_INFO $path_info;
}

}



server {
        listen 80;


        ssi on;
        ssi_types text/shtml;



        root /usr/share/nginx/gs.xunyou.com;
        index   index.shtml index.html index.php;
        server_name gs.xunyou.com cesu.xunyou.com;

        error_page 500 /500.html;
        #error_page 403 http://www.xunyou.com;
        error_page 404 /404.html;
location ~ /.svn/ {
  deny all;
}
location ~ /(/application/cache|log)/ {
        deny all;
}
location ~ \.php {
  fastcgi_index index.php;
  fastcgi_pass unix:/dev/shm/php5-fpm.sock;
  include fastcgi_params;
  set $path_info "";
  set $real_script_name $fastcgi_script_name;
  if ($fastcgi_script_name ~ "^(.+?\.php)(/.+)$") {
    set $real_script_name $1;
    set $path_info $2;
  }
  fastcgi_param SCRIPT_FILENAME /usr/share/nginx/gs.xunyou.com/$real_script_name;
  fastcgi_param SCRIPT_NAME $real_script_name;
  fastcgi_param PATH_INFO $path_info;
}

}

# You may add here your
# server {
#       ...
# }
# statements for each of your virtual hosts to this file

##
# You should look at the following URL's in order to grasp a solid understanding
# of Nginx configuration files in order to fully unleash the power of Nginx.
# http://wiki.nginx.org/Pitfalls
# http://wiki.nginx.org/QuickStart
# http://wiki.nginx.org/Configuration
#
# Generally, you will want to move this file somewhere, and start with a clean
# file but keep this around for reference. Or just disable in sites-enabled.
#
# Please see /usr/share/doc/nginx-doc/examples/ for more detailed examples.
##

server {
        listen 80;

        ssi on;
        ssi_types text/shtml;

        root /usr/share/nginx/g.xunyou.com;
        index index.php index.shtml index.html;
        server_name g.xunyou.com;

        error_page 500 /500.html;
        error_page 403 http://www.xunyou.com;
        error_page 404 /404.html;
        #allow 221.237.152.64;
        #allow 111.199.217.234;
        #deny all;
  location ~ /.svn/ {
    deny all;
  }
  location ~ \.php {
    fastcgi_index index.php;
    fastcgi_pass unix:/dev/shm/php5-fpm.sock;
    include fastcgi_params;
    set $path_info "";
    set $real_script_name $fastcgi_script_name;
    if ($fastcgi_script_name ~ "^(.+?\.php)(/.+)$") {
      set $real_script_name $1;
      set $path_info $2;
    }
    fastcgi_param SCRIPT_FILENAME /usr/share/nginx/g.xunyou.com/$real_script_name;
    fastcgi_param SCRIPT_NAME $real_script_name;
    fastcgi_param PATH_INFO $path_info;
  }
}

server {
        listen    80;
        root /dev/null;
        server_name hmystat.xunyou.com;


        location ~ /xystat{
                fastcgi_split_path_info ^(.+\.php)(/.+)$;
                fastcgi_pass unix:/dev/shm/php5-fpm.sock;
                include fastcgi_params;
        }
        location /nstat{
    stub_status on;
}
}
server {
        listen    80;
        ssi on;
        ssi_types text/shtml;
        root /usr/share/nginx/mall.xunyou.com;
        index index.shtml index.php index.html;
        server_name mall.xunyou.com;
        limit_req zone=one burst=15;

        location / {
                expires 20m;
        }

        error_page 500 /500.html;
        error_page 404 /404.php;
        #error_page 403 http://www.xunyou.com;
        location ~ /.svn/ {
         deny all;
        }
        location ~ /(application/cache)/ {
          deny all;
        }

        location ~ /(shop/proDetail|log)/{
        location ~ \.(php|php5)$ {
           deny all;
         }
  }

        location ~ \.php {
                fastcgi_split_path_info ^(.+\.php)(/.+)$;
                fastcgi_pass unix:/dev/shm/php5-fpm.sock;
                fastcgi_index index.php;
                include fastcgi_params;
        }

}

server {
	listen    80;
	listen 443 ssl;
        limit_req zone=one burst=15;
        ssi on;
        ssi_types text/shtml;
	ssl_certificate /etc/nginx/ssl/xunyou.crt;
        ssl_certificate_key /etc/nginx/ssl/xunyou.key;
        ssl_session_timeout 5m;
        ssl_protocols SSLv3 TLSv1.1 TLSv1.2;
        ssl_ciphers AESGCM:ALL:!DH:!EXPORT:!RC4:+HIGH:!MEDIUM:!LOW:!aNULL:!eNULL;
        ssl_prefer_server_ciphers on;
        root /usr/share/nginx/my.xunyou.com;
        index index.php index.html index.shtml;

        # Make site accessible from http://localhost/
        server_name my.xunyou.com;
        location ~ /.svn/ {
           deny all;
        }

        location / {
                expires 25m;
        }


        error_page 500  /500.html;
        error_page 404  /404.html;
         location ~ /log/ {
          deny all;
        }

        location ~ /application/cache/ {
         deny all;
        }

        location ~ /weixin/application/cache/ {
         deny all;
        }

       location ~ /weixin/log/ {
        deny all;
       }
        location ~ \.php {
                fastcgi_split_path_info ^(.+\.php)(/.+)$;
                fastcgi_intercept_errors on;
                fastcgi_pass unix:/dev/shm/php5-fpm.sock;
                fastcgi_index index.php;
                include fastcgi_params;
        }



}

server {
        limit_req zone=one burst=15;
        listen 80;


        ssi on;
        ssi_types text/shtml;


        root /usr/share/nginx/union.xunyou.com/qqinfo;
        index index.shtml index.html index.php;
        server_name qqvip.xunyou.com;

        error_page 500 /500.html;
        error_page 403 http://www.xunyou.com;
        error_page 404 /404.html;
location ~ /.svn/ {
  deny all;
}
location ~ \.php {
  fastcgi_index index.php;
  fastcgi_pass unix:/dev/shm/php5-fpm.sock;
  include fastcgi_params;
  set $path_info "";
  set $real_script_name $fastcgi_script_name;
  if ($fastcgi_script_name ~ "^(.+?\.php)(/.+)$") {
    set $real_script_name $1;
    set $path_info $2;
  }
  fastcgi_param SCRIPT_FILENAME /usr/share/nginx/union.xunyou.com/qqinfo/$real_script_name;
  fastcgi_param SCRIPT_NAME $real_script_name;
  fastcgi_param PATH_INFO $path_info;
}

}


server {
        listen    80;
        ssi on;
        ssi_types text/shtml;
        root /usr/share/nginx/rank.xunyou.com;
        index index.html index.php;
        server_name rank.xunyou.com;

        #location / {
        #       try_files $uri $uri/ /index.html;
        #}

        error_page 500 /500.html;
        #error_page 404 =200  /404.php;
        location ~ /.svn/ {
           deny all;
        }
        location ~ /(rank)/{
          location ~ \.(php|php5)$ {
            deny all;
         }
       }
       location ~ /(compiled)/ {
           deny all;
       }

        location ~ \.php {
        #       fastcgi_intercept_errors on;
                fastcgi_split_path_info ^(.+\.php)(/.+)$;
        #       # NOTE: You should have "cgi.fix_pathinfo = 0;" in php.ini
        #
        #       # With php5-cgi alone:
                fastcgi_pass unix:/dev/shm/php5-fpm.sock;
                # With php5-fpm:
        #       fastcgi_pass unix:/var/run/php5-fpm.sock;
                fastcgi_index index.php;
                include fastcgi_params;
        }

}


server {
        listen    80;
        listen 443 ssl;
	limit_req zone=one burst=15;
        ssi on;
        ssl_certificate /etc/nginx/ssl/xunyou.crt;
        ssl_certificate_key /etc/nginx/ssl/xunyou.key;
        ssl_session_timeout 5m;
        ssl_protocols SSLv3 TLSv1.1 TLSv1.2;
        ssl_ciphers AESGCM:ALL:!DH:!EXPORT:!RC4:+HIGH:!MEDIUM:!LOW:!aNULL:!eNULL;
        ssl_prefer_server_ciphers on;
        ssi_types text/shtml;
        root /usr/share/nginx/trade.xunyou.com;
        index index.shtml  index.html index.php;
        server_name trade.xunyou.com;

        #location / {
        #       try_files $uri $uri/ /index.html;
        #}

        error_page 500 = /500.html;
        error_page 404 =404 /404.html;
        #error_page 404 =200  /404.php;
        location ~ /.svn/ {
           deny all;
        }
        location ~ \.php {
        #       fastcgi_intercept_errors on;
                fastcgi_split_path_info ^(.+\.php)(/.+)$;
        #       # NOTE: You should have "cgi.fix_pathinfo = 0;" in php.ini
        #
        #       # With php5-cgi alone:
                fastcgi_pass unix:/dev/shm/php5-fpm.sock;
                # With php5-fpm:
        #       fastcgi_pass unix:/var/run/php5-fpm.sock;
                fastcgi_index index.php;
                include fastcgi_params;
        }

        location ~ /xystat{
                fastcgi_split_path_info ^(.+\.php)(/.+)$;
                fastcgi_pass unix:/dev/shm/php5-fpm.sock;
                include fastcgi_params;
        }
}

server {
        listen 80;


        ssi on;
        ssi_types text/shtml;


        root /usr/share/nginx/union.xunyou.com;
        index index.shtml index.html index.php;
        server_name union.xunyou.com  partnerunion.xunyou.com;

        error_page 500 /500.html;
        #error_page 403 http://www.xunyou.com;
        error_page 404 /404.html;

        location / {
                expires 25m;
        }

location ~ /.svn/ {
  deny all;
}
location ~ /(pay/application/cache)/ {
        deny all;
}
location ~ /log/{
        location ~ \.(php|php5)$ {
        deny all;
    }
}

location ~ \.php {
  fastcgi_index index.php;
  fastcgi_pass unix:/dev/shm/php5-fpm.sock;
  include fastcgi_params;
  set $path_info "";
  set $real_script_name $fastcgi_script_name;
  if ($fastcgi_script_name ~ "^(.+?\.php)(/.+)$") {
    set $real_script_name $1;
    set $path_info $2;
  }
  fastcgi_param SCRIPT_FILENAME /usr/share/nginx/union.xunyou.com/$real_script_name;
  fastcgi_param SCRIPT_NAME $real_script_name;
  fastcgi_param PATH_INFO $path_info;
}

}

server {
        listen 80;
        #listen 443 ssl;

        ssi on;
        ssi_types text/shtml;

        root /usr/share/nginx/www.xunyou.com;
        index index.shtml index.html index.php;
        server_name www.xunyou.com partnerinfo.xunyou.com ;
        #ssl_certificate /etc/nginx/ssl/nginx.crt;
        #ssl_certificate_key /etc/nginx/ssl/nginx.key;
        #expires 6h;

        error_page 500 /500.html;
        #error_page 403 http://www.xunyou.com;
        error_page 404 /404.html;
        location / {
                expires 20m;
        }
location ~ /.svn/ {
  deny all;
}
location ~ /(app1/templates_c)/ {
        deny all;
}
location ~ \.php {
  fastcgi_index index.php;
  fastcgi_pass unix:/dev/shm/php5-fpm.sock;
  include fastcgi_params;
  set $path_info "";
  set $real_script_name $fastcgi_script_name;
  if ($fastcgi_script_name ~ "^(.+?\.php)(/.+)$") {
    set $real_script_name $1;
    set $path_info $2;
  }
  fastcgi_param SCRIPT_FILENAME /usr/share/nginx/www.xunyou.com/$real_script_name;
  fastcgi_param SCRIPT_NAME $real_script_name;
  fastcgi_param PATH_INFO $path_info;
}


}

server {
        server_name xunyou.com;
        rewrite ^ http://www.xunyou.com$request_uri;
}

server {
        listen 80 default;
        server_name _;
        rewrite ^ http://www.xunyou.com$request_uri;
}
server {
        limit_req zone=one burst=15;
        ssi on;
        ssi_types text/shtml;
        root /usr/share/nginx/notify.xunyou.com;
        index index.php index.html index.shtml;

        # Make site accessible from http://localhost/
        server_name notify.xunyou.com;
        location ~ /.svn/ {
           deny all;
        }
        location / {
                expires 25m;
        }

        error_page 500  /500.html;
        error_page 404  /404.html;
         location ~ /log/ {
          deny all;
        }

        location ~ /application/cache/ {
         deny all;
        }

        location ~ \.php {
                fastcgi_split_path_info ^(.+\.php)(/.+)$;
                fastcgi_intercept_errors on;
                fastcgi_pass unix:/dev/shm/php5-fpm.sock;
                fastcgi_index index.php;
                include fastcgi_params;
        }
}

server {
        listen    80;
        ssi on;
        ssi_types text/shtml;
        root /usr/share/nginx/weixin.xunyou.com;
        index index.shtml index.php index.html;
        server_name weixin.xunyou.com;
        limit_req zone=one burst=15;

        location / {
                expires 20m;
        }

        error_page 500 /500.html;
        error_page 404 /404.php;
        #error_page 403 http://www.xunyou.com;
        location ~ /.svn/ {
         deny all;
        }
        location ~ /(application/cache)/ {
          deny all;
        }
        location ~ /(application/templates_c)/ {
          deny all;
        }

        location ~ /upload/{
         location ~ \.(php|php5)$ {
         deny all;
         }
        }

        location ~ \.php {
                fastcgi_split_path_info ^(.+\.php)(/.+)$;
                fastcgi_pass unix:/dev/shm/php5-fpm.sock;
                fastcgi_index index.php;
                include fastcgi_params;
        }

}

server {
        listen    80;
        ssi on;
        ssi_types text/shtml;
        root /usr/share/nginx/corp.xunyou.com;
        index index.shtml index.php index.html;
        server_name corp.xunyou.com;
        limit_req zone=one burst=15;

        location / {
                expires 20m;
        }

        error_page 500 /500.html;
        error_page 404 /404.php;
        #error_page 403 http://www.xunyou.com;
        location ~ /.svn/ {
         deny all;
        }
        location ~ /(application/cache)/ {
          deny all;
        }
        location ~ /(application/templates_c)/ {
          deny all;
        }

        location ~ \.php {
                fastcgi_split_path_info ^(.+\.php)(/.+)$;
                fastcgi_pass unix:/dev/shm/php5-fpm.sock;
                fastcgi_index index.php;
                include fastcgi_params;
        }

}

server {
        listen    80;
        listen 443 ssl;
        limit_req zone=one burst=15;
        ssi on;
        ssi_types text/shtml;
        ssl_certificate /etc/nginx/ssl/news.xunyou.crt;
        ssl_certificate_key /etc/nginx/ssl/news.xunyou.key;
        ssl_session_timeout 5m;
        ssl_protocols SSLv3 TLSv1.1 TLSv1.2;
        ssl_ciphers AESGCM:ALL:!DH:!EXPORT:!RC4:+HIGH:!MEDIUM:!LOW:!aNULL:!eNULL;
        ssl_prefer_server_ciphers on;
        root /usr/share/nginx/news.xunyou.com;
        index index.php index.html index.shtml;

        # Make site accessible from http://localhost/
        server_name news.xunyou.com;
        location ~ /.svn/ {
           deny all;
        }

        location / {
                expires 25m;
        }


        error_page 500  /500.html;
        error_page 404  /404.html;
         location ~ /log/ {
          deny all;
        }

        location ~ \.php {
                fastcgi_split_path_info ^(.+\.php)(/.+)$;
                fastcgi_intercept_errors on;
                fastcgi_pass unix:/dev/shm/php5-fpm.sock;
                fastcgi_index index.php;
                include fastcgi_params;
        }

}

