digraph G {
	db1 -> db0 [label="自动收集现成配置信息"]
	db2 -> db0
	"web管理界面" -> db0 [label="人工配置信息"]
	db0 -> "puppet-data" [label="配置信息用yaml格式发布提交到git,作为puppet的enc数据"]
        "git 客户端" -> "puppet-data"
	"puppet manifest" -> "puppet-code"
	"gpg sign" -> "puppet-data"
	"gpg sign" -> "puppet-code"
	"puppet-data" -> public_git [label="镜像到公网" ]
	"puppet-code" -> public_git [label="镜像到公网" ]
	public_git -> host1 [label="用ssh进行git分发,git包括puppet manifest和enc配置"]
	public_git -> host2 [label="用yaml格式不局限于puppet" ]
	public_git -> host3 [label="puppet 验证gpg 签名后，执行puppet"]
	host1 -> foreman
	host2 -> foreman
	host3 -> foreman
	
	db1 [shape=egg,label="资产管理数据库"];
	db2 [shape=egg,label="服务器业务配置数据库"];
	db0 [shape=egg];
	"puppet manifest" [shape=box]
	"web管理界面" [shape=box]
	"gpg sign" [shape=triangle]
	}
